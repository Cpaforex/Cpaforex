<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سیستم توکن LevelUp - پلتفرم پیشرفته تجارت و MLM</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazir:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <meta name="description" content="پلتفرم پیشرفته تجارت توکن LevelUp با قابلیت‌های MLM، سواپ و شبکه‌سازی">
    <meta name="keywords" content="توکن، کریپتو، MLM، سواپ، بلاک‌چین، پولیگان">
</head>
<body class="bg-light">
    <div class="container-fluid">
        <!-- هدر اصلی -->
        <header class="header text-center py-5 fade-in">
            <h1 class="display-4 fw-bold text-gradient">سیستم توکن LevelUp</h1>
            <p class="lead fs-4 text-muted">پلتفرم پیشرفته تجارت توکن و شبکه‌سازی هوشمند</p>
            <div class="d-flex justify-content-center gap-3 flex-wrap mt-4">
                <span class="badge bg-primary px-3 py-2"><i class="bi bi-shield-check"></i> امن و قابل اعتماد</span>
                <span class="badge bg-success px-3 py-2"><i class="bi bi-lightning"></i> سریع و کارآمد</span>
                <span class="badge bg-info px-3 py-2"><i class="bi bi-people"></i> شبکه‌سازی هوشمند</span>
            </div>
        </header>

        <!-- بخش اصلی -->
        <main class="container py-4">
            <div class="row g-4">
                <!-- کیف پول و اطلاعات کلی -->
                <div class="col-lg-8">
                    <div class="card glass-card shadow-sm p-4 fade-in">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3 class="fw-bold"><i class="bi bi-wallet2 text-primary"></i> وضعیت حساب کاربری</h3>
                            <span id="network-status" class="badge bg-success"><i class="bi bi-wifi"></i> متصل به پولیگان</span>
                        </div>
                        <div id="wallet-status" class="alert alert-warning d-flex align-items-center">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i> کیف پول متصل نشده است
                        </div>
                        <button id="connect-wallet" class="btn btn-primary btn-lg w-100 mb-4">
                            <i class="bi bi-wallet2"></i> اتصال کیف پول
                        </button>
                        <div id="user-info" style="display: none;">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label fw-semibold">آدرس کیف پول:</label>
                                    <div class="input-group">
                                        <input type="text" id="wallet-address" class="form-control" readonly>
                                        <button class="btn btn-outline-secondary" onclick="copyToClipboard('wallet-address')">
                                            <i class="bi bi-clipboard"></i>
                                        </button>
                                    </div>
                                </div>
div class="col-md-6">
                                    <label class="form-label fw-semibold">موجودی MATIC:</label>
                                    <input type="text" id="matic-balance" class="form-control" readonly>
                                    <label class="form-label fw-semibold">ارزش دلاری:</label>
                                    <input type="text" id="Musd-value" class="form-control" readonly>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-semibold">موجودی LVL:</label>
                                    <input type="text" id="token-balance" class="form-control" readonly>
                                    <label class="form-label fw-semibold">ارزش دلاری:</label>
                                    <input type="text" id="Tusd-value" class="form-control" readonly>
                                </div>

                                <div class="mt-4">
                                    <label class="form-label fw-semibold">لینک معرف شما:</label>
                                    <div class="input-group">
                                        <input type="text" id="referral-link" class="form-control" readonly>
                                        <button class="btn btn-outline-primary" onclick="copyReferralLink()">
                                            <i class="bi bi-share"></i> اشتراک‌گذاری
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- قیمت و پاداش -->
                <div class="col-lg-4">
                    <div class="card glass-card shadow-sm p-4 fade-in">
                        <h4 class="fw-bold mb-3"><i class="bi bi-graph-up text-success"></i> قیمت لحظه‌ای</h4>
                        <div class="text-center">
                            <canvas id="priceChart" width="400" height="400"></canvas>
                            <div class="display-6 fw-bold text-primary mb-2">
                                <span id="token-price">0.0000</span> <small class="fs-6 text-muted">MATIC</small>
                            </div>
                            <div class="text-success mb-3">
                                <i class="bi bi-arrow-up"></i> <span id="price-change">+0.00%</span>
                            </div>
                            <button id="update-price" class="btn btn-outline-primary"><i class="bi bi-arrow-repeat"></i> بروزرسانی</button>
                        </div>
                    </div>
                    <div class="card glass-card shadow-sm p-4 mt-4 fade-in">
                        <h4 class="fw-bold mb-3"><i class="bi bi-award text-warning"></i> پاداش باینری</h4>
                        <div class="mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span>امتیاز باینری:</span>
                                <span id="binary-points" class="fw-bold">0</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>سقف امتیاز:</span>
                                <span id="binary-point-cap" class="fw-bold">0</span>
                            </div>
                            <div class="progress mb-3">
                                <div id="binary-progress" class="progress-bar" role="progressbar" style="width: 0%"></div>
                            </div>
                            <button id="claim-binary" class="btn btn-warning w-100" disabled>
                                <i class="bi bi-cash-stack"></i> دریافت پاداش
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- تب‌های اصلی -->
            <div class="card glass-card shadow-sm mt-4 fade-in">
                <ul class="nav nav-pills nav-fill mb-4" id="mainTabs" role="tablist">
                    <li class="nav-item"><button class="nav-link active" id="swap-tab" data-bs-toggle="pill" data-bs-target="#swap-content" type="button" role="tab"><i class="bi bi-arrow-left-right"></i> سواپ توکن</button></li>
                    <li class="nav-item"><button class="nav-link" id="network-tab" data-bs-toggle="pill" data-bs-target="#network-content" type="button" role="tab"><i class="bi bi-diagram-3"></i> شبکه زیرمجموعه</button></li>
                    <li class="nav-item"><button class="nav-link" id="register-tab" data-bs-toggle="pill" data-bs-target="#register-content" type="button" role="tab"><i class="bi bi-person-plus"></i> ثبت‌نام و فعال‌سازی</button></li>
                    <li class="nav-item"><button class="nav-link" id="analytics-tab" data-bs-toggle="pill" data-bs-target="#analytics-content" type="button" role="tab"><i class="bi bi-bar-chart"></i> آمار و تحلیل</button></li>
                </ul>
                <div class="tab-content" id="mainTabsContent">
                    <!-- تب سواپ -->
                    <div class="tab-pane fade show active" id="swap-content" role="tabpanel">
                        <div class="swap-container text-center">
                            <h3 class="fw-bold mb-4"><i class="bi bi-arrow-left-right text-primary"></i> سواپ هوشمند توکن</h3>
                            <div class="row justify-content-center">
                                <div class="col-lg-6">
                                    <div class="swap-input-group">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <label class="form-label fw-semibold mb-0">از:</label>
                                            <div class="dropdown">
                                                <button class="btn btn-outline-primary dropdown-toggle" type="button" id="fromTokenDropdown" data-bs-toggle="dropdown">
                                                    <img src="" width="20" height="20" class="me-2"> MATIC
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#" data-token="MATIC"><img src="" width="20" height="20" class="me-2"> MATIC</a></li>
                                                    <li><a class="dropdown-item" href="#" data-token="LVL"><div class="bg-primary rounded-circle d-inline-block me-2" style="width: 20px; height: 20px;"></div> LVL</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="input-group">
                                            <input type="number" id="from-amount" class="form-control form-control-lg" placeholder="0.0" min="0" step="0.000001">
                                            <button class="btn btn-outline-secondary" onclick="setMaxAmount('from')">MAX</button>
                                        </div>
                                        <div class="text-muted mt-2">موجودی: <span id="from-balance">0.0000</span></div>
                                    </div>
                                    <div class="swap-arrow">
                                        <button class="swap-arrow-btn" onclick="swapTokens()"><i class="bi bi-arrow-down-up"></i></button>
                                    </div>
                                    <div class="swap-input-group">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <label class="form-label fw-semibold mb-0">به:</label>
                                            <div class="dropdown">
                                                <button class="btn btn-outline-primary dropdown-toggle" type="button" id="toTokenDropdown" data-bs-toggle="dropdown">
                                                    <div class="bg-primary rounded-circle d-inline-block me-2" style="width: 20px; height: 20px;"></div> LVL
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#" data-token="MATIC"><img src="" width="20" height="20" class="me-2"> MATIC</a></li>
                                                    <li><a class="dropdown-item" href="#" data-token="LVL"><div class="bg-primary rounded-circle d-inline-block me-2" style="width: 20px; height: 20px;"></div> LVL</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <input type="text" id="to-amount" class="form-control form-control-lg" placeholder="0.0" readonly>
                                        <div class="text-muted mt-2">موجودی: <span id="to-balance">0.0000</span></div>
                                    </div>
                                    <div class="bg-light rounded p-3 mb-4">
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>نرخ تبدیل:</span>
                                            <span id="exchange-rate">1 MATIC = 0 LVL</span>
                                        </div>
                                        <div class="d-flex justify-content-between mb-2">
                                            <span>کارمزد شبکه:</span>
                                            <span id="network-fee">~0.001 MATIC</span>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <span>تاثیر قیمت:</span>
                                            <span id="price-impact" class="text-success">< 0.01%</span>
                                        </div>
                                    </div>
                                    <button id="swap-button" class="btn btn-primary btn-lg w-100" disabled><i class="bi bi-arrow-left-right"></i> اتصال کیف پول</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- سایر تب‌ها به همین ترتیب با استایل مشابه به‌روزرسانی می‌شوند -->
                </div>
            </div>
        </main>

        <!-- Modal تراکنش -->
        <div class="modal fade" id="transactionModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content glass-card">
                    <div class="modal-header border-0">
                        <h5 class="modal-title"><i class="bi bi-hourglass-split text-primary"></i> در حال پردازش تراکنش</h5>
                    </div>
                    <div class="modal-body text-center py-4">
                        <div class="loading-spinner mb-3"></div>
                        <p id="transaction-message" class="mb-0">لطفا منتظر بمانید...</p>
                        <small class="text-muted">این عملیات ممکن است چند دقیقه طول بکشد</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast Container -->
        <div id="toast-container" class="position-fixed top-0 end-0 p-3" style="z-index: 9999;"></div>

        <!-- Footer -->
        <footer id="footer-placeholder" class="text-center py-4 bg-dark text-white"></footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
    <script src="js/swap.js"></script>
    <script>
        fetch('footer.html').then(r => r.text()).then(html => {
            document.getElementById('footer-placeholder').innerHTML = html;
        });
    </script>
</body>
</html>