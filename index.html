<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پلتفرم LevelUp | داشبورد مدرن</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet">

    <!-- بارگذاری ethers.js نسخه 6 از CDN -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.7.0/dist/ethers.umd.min.js"></script>
    <!-- بارگذاری Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

  <!-- ✅ ناوبار -->
  <div id="navbar-container"></div>
  <script>
    fetch('./pages/navbar.html')
      .then(res => res.text())
      .then(html => {
        document.getElementById('navbar-container').innerHTML = html;
      });
  </script>

  <!-- ✅ بلوک انگیزشی -->
  <div class="motivational-container">
    <div class="motivational-text" id="motivational-text">
      در حال بارگذاری جملات انگیزشی...
    </div>
  </div>

  <style>
    .motivational-container {
      width: 100%;
      padding: 15px 0;
      margin: 0 auto;
      background: rgba(0,0,0,0.05);
      border-radius: 8px;
      text-align: center;
    }
    .motivational-text {
      font-size: 1.2rem;
      font-weight: 500;
      color: #333;
      font-family: 'Vazirmatn', sans-serif;
      direction: rtl;
      padding: 10px 20px;
      opacity: 0.5;
      transition: opacity 0.5s ease-in-out;
    }
    .motivational-text.fade-out {
      opacity: 0;
    }
  </style>
  <script>
    const messages = ["💡 موفقیت یعنی رفتن، حتی وقتی هیچ‌کس تشویقت نمی‌کنه — به خودت ایمان داشته باش", "🔥 هر روز، یک فرصت برای برتریه، نه فقط بقا", "🌱 آرام باش ولی متوقف نشو", /* shortened for brevity */ "🪞 خودت رو تحسین کن، چون تا اینجا رو اومدی"];
    let currentIndex = 0;
    const textElement = document.getElementById('motivational-text');
    function showNextMessage() {
      textElement.classList.add('fade-out');
      setTimeout(() => {
        currentIndex = (currentIndex + 1) % messages.length;
        textElement.textContent = messages[currentIndex];
        textElement.classList.remove('fade-out');
      }, 500);
    }
    textElement.textContent = messages[0];
    setInterval(showNextMessage, 20000);
  </script>

  <!-- ✅ هدر و تایپ‌نویس -->
  <header style="padding: 2rem; font-family: 'Vazirmatn', sans-serif;">
    <h1 style="text-align:center; color:#00ffae;">پلتفرم LevelUp</h1>
    <div style="max-width:800px; margin:auto;">
      <div id="typewriter-box" style="height: 3.2em; overflow-y: auto; white-space: pre-wrap; line-height: 1.6; color: #f1f1f1; font-size: 1rem; position: relative; transition: height 0.5s ease; border-radius: 12px; background: rgba(255,255,255,0.03); padding: 1rem; direction: rtl; scrollbar-width: thin; scrollbar-color: #00ffae transparent;"></div>
      <div style="text-align:center; margin-top: 0.5rem;">
        <button id="expandTypewriter" style="background: #00ffae; border: none; color: #000; padding: 6px 18px; border-radius: 25px; font-weight: bold; cursor: pointer;">⬇️ بیشتر</button>
      </div>
    </div>
  </header>

  <!-- ✅ اتصال کیف پول -->
  <button id="connectButton">اتصال کیف پول</button>

  <!-- ✅ بخش‌های داشبورد -->
  <section class="motivation-slider" id="motivation-slider">
    <span id="motivation-message">در حال بارگذاری پیام انگیزشی...</span>
    <button class="next-btn" id="next-motivation">&#8592;</button>
  </section>

  <section class="dashboard-cards">
    <div class="dashboard-card"><h4>قیمت لحظه‌ای توکن (LVL)</h4><div class="value" id="token-price">-</div></div>
    <div class="dashboard-card"><h4>توکن در گردش</h4><div class="value" id="circulating-supply">-</div></div>
    <div class="dashboard-card"><h4>کاربران فعال</h4><div class="value" id="total-points">-</div></div>
    <div class="dashboard-card"><h4>حجم معاملات (MATIC)</h4><div class="value" id="trading-volume">-</div></div>
    <div class="dashboard-card"><h4>پوینت‌های پرداخت شده</h4><div class="value" id="claimed-points">-</div></div>
    <div class="dashboard-card"><h4>پوینت‌های مانده</h4><div class="value" id="remaining-points">-</div></div>
    <div class="dashboard-card"><h4>ارزش هر پوینت (LVL)</h4><div class="value" id="point-value">-</div></div>
    <div class="dashboard-card"><h4>استخر پاداش (LVL)</h4><div class="value" id="reward-pool">-</div></div>
  </section>

  <!-- ✅ نمودار -->
  <section class="chart-section">
    <h3 style="text-align:center; color:#a786ff;">نمودار قیمت LVL به MATIC</h3>
    <canvas id="priceChart" height="120"></canvas>
  </section>

  <!-- ✅ فوتر -->
  <footer>
    <p style="text-align:center; color:#888;">&copy; 2025 LevelUp. All rights reserved.</p>
  </footer>

  <!-- ✅ تایپ‌نویس اسکریپت -->
  <script>
    const fullText = `در دل دنیای پرهیاهوی امروز...`; // متن کوتاه شده برای نمایش
    const box = document.getElementById("typewriter-box");
    const button = document.getElementById("expandTypewriter");
    let charIndex = 0;
    let expanded = false;
    const lineHeight = 1.6 * 16;
    const initialHeight = 2 * lineHeight;
    const expandedHeight = 5 * lineHeight;
    box.style.height = initialHeight + "px";
    function typeText() {
      if (charIndex < fullText.length) {
        box.textContent += fullText.charAt(charIndex);
        charIndex++;
        box.scrollTop = box.scrollHeight;
        setTimeout(typeText, 25);
      }
    }
    button.addEventListener("click", () => {
      if (!expanded) {
        expanded = true;
        box.style.height = expandedHeight + "px";
        setTimeout(() => {
          box.scrollTop = box.scrollHeight;
        }, 300);
        button.style.display = "none";
      }
    });
    typeText();
  </script>

  <!-- ✅ فایل‌های JS پروژه -->
  <script src="js/config.js"></script>
  <script src="js/main.js"></script>
  <script src="js/homepage.js"></script>
  <script src="js/web3-interactions.js"></script>

</body>
</html>
